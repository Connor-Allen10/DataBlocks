<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Farm Items Table</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        Navigation:
        <a href="/home">Home</a>
        <a href="/players">Players</a>
        <a href="/worlds">Worlds</a>
        <a href="/advancements">Advancements</a>
        <a href="/stats">Statistics</a>
		<a href="/farms">Farms</a>
        <a href="/farmitems">Farm Items</a>
        <a href="/storageunits">Storage Units</a>
        <a href="/storeditems">Stored Items</a>
    </nav>   

    <h1>Farm Items</h1>
    <div class="Description">
        <p>Unique items from each farm</p>
    </div>
    <table>
        <thead>
            <tr>
                <th>FarmItemID</th>
                <th>Item Name</th>
                <th>Yield Per Hour</th>
                <th>FarmID</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody>
            <!-- rendered by JS -->
        </tbody>
    </table>

    <h2>Add a farm item</h2>
    <form id="add_farm_item_form" method="POST" action="/add-farmItem">
        <label for="item_name_input">item name:</label>
        <input type="text" name="item_name_input" id="item_name_input" required>

        <label for="item_yeild_input">items yielded per hour:</label>
        <input type="number" name="item_yield_input" id="item_yeild_input" required>
        <label for="item_farm_id_input">farm id:</label>
        <input type="text" name="item_farm_id_input" id="item_farm_id_input" required>

        <input type="submit" value="Add farm item">
    </form>

    <script>
    // Fetch and render farm items table
    function renderFarmItemsTable() {
        fetch('/api/farmitems')
            .then(response => response.json())
            .then(farmitems => {
                const tbody = document.querySelector('table tbody');
                tbody.innerHTML = '';
                farmitems.forEach(farmitem => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${farmitem.farm_item_id}</td>
                        <td>${farmitem.item_name}</td>
                        <td>${farmitem.item_yield_per_hour}</td>
                        <td>${farmitem.farm_id}</td>
                        <td>
                            <form method="POST" action="/delete-farmItem" style="display:inline;">
                                <input type="hidden" name="farm_item_id" value="${farmitem.farm_item_id}">
                                <button type="submit">Delete</button>
                            </form>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            });
    }
    document.addEventListener('DOMContentLoaded', rendeFarmItemsTable);
    </script>
</body>
</html>
