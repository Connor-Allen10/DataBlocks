<html>
<head>
    <meta charset="utf-8">
    <title>World Statistics & Advancements</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <nav>
        Navigation:
        <a href="/home">Home</a>
        <a href="/players">Players</a>
        <a href="/worlds">Worlds</a>
        <a href="/advancements">Advancements</a>
        <a href="/stats">Statistics</a>
		<a href="/farms">Farms</a>
        <a href="/farmitems">Farm Items</a>
        <a href="/storageunits">Storage Units</a>
        <a href="/storeditems">Stored Items</a>
    </nav>

    <h1>Statistics</h1>
    <div class="Description">
        <p>View, update, and delete statistics for a selected world.</p>
    </div>

    <!--<h2>World Statistics</h2>

    <form method="GET" action="/stats">
        <label for="selected_world_id">Select World:</label>
        <select name="selected_world_id" id="selected_world_id">
            <option value="1">horror gameplay</option>
            <option value="2">parkour civilization</option>
        </select>
        <input type="submit" value="View Statistics">
    </form>-->

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Blocks Mined</th>
                <th>Distance Travelled</th>
                <th>Mob Slain</th>
                <th>Days Elapsed</th>
                <th>World ID</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data rows rendered by JS -->
        </tbody>
    </table>

    <h2>Add Statistic</h2>
        <form id="add_statistic_form" method="POST" action="/add-statistic">
            <label for="blocks_mined_input">Blocks Mined:</label>
            <input type="number" name="blocks_mined_input" id="blocks_mined_input" required>

            <label for="distance_travelled_input">Distance Travelled:</label>
            <input type="number" name="distance_travelled_input" id="distance_travelled_input" required>

            <label for="mob_slain_input">Mob Slain:</label>
            <input type="number" name="mob_slain_input" id="mob_slain_input" required>

            <label for="days_elapsed_input">Days Elapsed:</label>
            <input type="number" name="days_elapsed_input" id="days_elapsed_input" required>

            <label for="world_id_input">World ID:</label>
            <input type="number" name="world_id_input" id="world_id_input" required>

            <input type="submit" value="Add Statistic">
        </form>

    <script>
    // Fetch and render Statistics table
    function renderStatsTable() {
        fetch('/api/statistics')
            .then(response => response.json())
            .then(stats => {
                const tbody = document.querySelector('table tbody');
                tbody.innerHTML = '';
                stats.forEach(stat => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${stat.statistic_id}</td>
                        <td>${stat.blocks_mined}</td>
                        <td>${stat.distance_travelled}</td>
                        <td>${stat.mob_slain}</td>
                        <td>${stat.days_elapsed}</td>
                        <td>${stat.world_id}</td>
                        <td>
                            <form method="POST" action="/delete-statistic" style="display:inline;">
                                <input type="hidden" name="statistic_id" value="${stat.statistic_id}">
                                <button type="submit">Delete</button>
                            </form>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            });
    }

        
    document.addEventListener('DOMContentLoaded', renderStatsTable);
    </script>
    
    <!--<h2>Update Statistics</h2>

    <form method="POST" action="/update-statistics">

        <label for="update_world_id">World:</label>
        <select name="selected_world_id" id="update_world_id">
            <option value="1">SurvivalLand</option>
            <option value="2">CreativeWorld</option>
        </select>

        <label for="input_blocks_mined">Blocks Mined:</label>
        <input type="number" name="input_blocks_mined" id="input_blocks_mined" required>

        <label for="descriptionInput">Distance Travelled:</label>
        <input type="number" name="descriptionInput" id="descriptionInput" required>

        <label for="conditionInput">Mobs Slain:</label>
        <input type="number" name="conditionInput" id="conditionInput" required>

        <label for="categoryInput">Days Elapsed:</label>
        <input type="number" name="categoryInput" id="categoryInput" required>

        <input type="submit" value="Update Statistics">
    </form>

    <h1>Advancements</h1>
    <div class="AdvancementsDescription">
        <p>View, add, and update advancements for worlds.</p>
    </div>

    <table>
        <thead>
            <tr>
                <th>name</th>
                <th>description</th>
                <th>progress</th>
                <th>world_id</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Subspace Bubble</td><td>Use the Nether to travel 7 km in the Overworld</td><td>0</td><td>1</td></tr>
            <tr><td>Hidden in the Depths</td><td>Obtain Ancient Debris</td><td>100</td><td>1</td></tr>
            <tr><td>The End?</td><td>Enter the End Portal</td><td>100</td><td>1</td></tr>
            <tr><td>Acquire Hardware</td><td>Smelt an Iron Ingot</td><td>100</td><td>1</td></tr>
            <tr><td>Stone Age</td><td>Mine Stone with your new Pickaxe</td><td>100</td><td>3</td></tr>
            <tr><td>We Need to Go Deeper</td><td>Build, light and enter a Nether Portal</td><td>0</td><td>3</td></tr>
            <tr><td>Cover Me with Diamonds</td><td>Diamond armor saves lives</td><td>50</td><td>3</td></tr>
            <tr><td>Enchanter</td><td>Enchant an item at an Enchanting Table</td><td>0</td><td>3</td></tr>
        </tbody>
    </table>

    <h2>Add Advancement</h2>

    <form method="POST" action="/add-advancement">

        <label for="name_input">Name:</label>
        <input type="text" name="name_input" id="name_input" required>

        <label for="description_input">Description:</label>
        <input type="text" name="description_input" id="description_input" required>

        <label for="progress_input">Progress:</label>
        <select name="progress_input" id="progress_input">
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
        </select>

        <label for="selected_world_id">World:</label>
        <select name="selected_world_id">
            <option value="1">SurvivalLand</option>
            <option value="2">CreativeWorld</option>
        </select>

        <input type="submit" value="Add Advancement">
    </form>

    <h2>Update Advancement Progress</h2>

    <form method="POST" action="/update-advancement">

        <label for="update_world_id">World:</label>
        <select name="selected_world_id">
            <option value="1">SurvivalLand</option>
            <option value="2">CreativeWorld</option>
        </select>

        <label for="progress_input">New Progress:</label>
        <select name="progress_input">
            <option value="0">In Progress</option>
            <option value="100">Completed</option>
        </select>

        <input type="submit" value="Update Advancement">
    </form>-->

</body>
</html>